<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Nuestro trabajo académico</title>
    <style>
        select {
            border: none;
            font-size: 99%;
            background: rgba(0, 100, 255, .1);
        }
    </style>
</head>

<body>
    <section class="container">
        <div class="row py-5">
            <div class="col-12 col-sm-10 mx-auto">

                <h1 class="text-primary">Séptimo Semestre</h1>

                <h3>Diseño, mención en Diseño Gráfico @ Universidad de Chile</h3>

                <p class="lead">El Sistema de Créditos Transferibles, denominado <a href="https://sct-chile.consejoderectores.cl/">SCT-Chile</a>, busca medir, racionalizar y distribuir el trabajo académico de los estudiantes entre las diversas actividades curriculares que componen su plan de estudios.</p>

                <p>La carrera de Diseño de la Universidad de Chile, en sus dos menciones, <a href="http://profesor.faco.cl/dis/wp-content/uploads/2016/06/decreto_001977-1.pdf">adoptó el SCT-Chile en enero de 2016</a>. Tres años más tarde nos preguntamos: ¿Qué está pasando con la medición, la racionalización y la distribución del trabajo académico de los estudiantes? Para responder, tenemos que considerar, primero, que los créditos SCT que deben aprobarse en séptimo semestre son, en total, 31. Estos créditos se distribuyen en <a href="#" data-toggle="modal" data-target=".tabla-semestral">8 asignaturas</a>. Luego, si intentamos acotar el trabajo académico a
                    <select id="horas" onchange="operacion()">
                        <option>20</option>
                        <option>30</option>
                        <option selected>40</option>
                        <option>45</option>
                        <option>50</option>
                        <option>55</option>
                        <option>60</option>
                        <option>80</option>
                    </select> horas por semana, una proporción directa nos entregará las horas que, idealmente, tenemos que dedicar a cada asignatura.</p>

                <p>¿Pero qué tan lejos está lo real de lo ideal? <span id="seleccion" style="position:relative; background:white; border:none;"></span></p>

                <div id="resultado"></div>

            </div>
        </div>
    </section>

    <div class="modal fade tabla-semestral" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <div class="modal-body">

                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Asignatura</th>
                                <th class="text-center">Créditos SCT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>DGP501</td>
                                <td>Taller de Diseño Gráfico V</td>
                                <td class="text-center">9.0</td>
                            </tr>
                            <tr>
                                <td>DGP502</td>
                                <td>Seminario Gráfica Computacional I</td>
                                <td class="text-center">3.0</td>
                            </tr>
                            <tr>
                                <td>DGP503</td>
                                <td>Seminario Producción Audiovisual I</td>
                                <td class="text-center">3.0</td>
                            </tr>
                            <tr>
                                <td>DGP504</td>
                                <td>Seminario Diseño Gráfico I</td>
                                <td class="text-center">5.0</td>
                            </tr>
                            <tr>
                                <td>DGP505</td>
                                <td>Publicidad</td>
                                <td class="text-center">3.0</td>
                            </tr>
                            <tr>
                                <td>DGP506</td>
                                <td>Seminario de Gestión I</td>
                                <td class="text-center">3.0</td>
                            </tr>
                            <tr>
                                <td>DGP507</td>
                                <td>Práctica Profesional I</td>
                                <td class="text-center">2.0</td>
                            </tr>
                            <tr>
                                <td>DE3</td>
                                <td>Electivo III</td>
                                <td class="text-center">3.0</td>
                            </tr>
                        </tbody>
                    </table>

                </div>

            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>

    <script>
        var estudiantes = 5; // número de estudiantes que presentan testimonio en JSON
        var horas = 40; // opción por defecto de trabajo académico por semana
        var creditos = 31; // total de créditos del 7mo. semestre
        var sct, sel, donde; // variables que pronto se usarán
        var url = "https://api.myjson.com/bins/170uju"; // la URL del JSON 

        function preload() {
            sct = loadJSON(url);
        }

        function setup() {
            sel = createSelect().parent('seleccion').id('asignatura').position(10, 0);
            sel.option('selecciona una asignatura');
            for (var i = 0; i < 7; i++) {
                sel.option(sct[i]["nombre"]);
            }
            sel.changed(evento);
            donde = createDiv('').parent('resultado').id('inside');
        }

        function operacion() {
            horas = Number(document.getElementById("horas").value);
            document.getElementById("asignatura").value = "selecciona una asignatura";
            donde.remove();
        }

        function evento() {
            donde.remove();
            donde = createDiv('').parent('resultado').id('inside').addClass("border-top pt-3");
            var w = document.getElementById('inside').offsetWidth;
            var h = (estudiantes * 31);
            var pos;

            if (sel.value().includes("Taller")) {
                pos = 0;
            } else if (sel.value().includes("Computacional")) {
                pos = 1;
            } else if (sel.value().includes("Audiovisual")) {
                pos = 2;
            } else if (sel.value().includes("Diseño")) {
                pos = 3;
            } else if (sel.value().includes("Publicidad")) {
                pos = 4;
            } else if (sel.value().includes("Gestión")) {
                pos = 5;
            } else if (sel.value().includes("Electivo")) {
                pos = 6;
            } else if (sel.value().includes("Práctica")) {
                pos = 7;
            } else {
                donde.remove();
            }

            createElement('h5', 'La asignatura de "' + sct[pos].nombre + '" aporta ' + sct[pos].creditaje + ' de los ' + creditos + ' créditos SCT del semestre').parent("inside");

            var proporcional = (sct[pos].creditaje * horas) / creditos;

            var proporcional_fix = proporcional.toFixed(2);

            createElement('p', 'A condición de dedicar ' + horas + ' hrs. a todo el trabajo académico, las actividades relacionadas con esta asignatura <strong>exigirían ' + proporcional_fix + ' horas cada semana</strong>.').parent("inside");

            createP('En un registro real, que considera un promedio de las últimas cuatro semanas, ' + estudiantes + ' estudiantes tuvieron que dedicar:').parent("inside");

            createCanvas(w, h).parent("inside");

            background(250);

            var total = 0;
            var promedio = 0;

            noStroke();

            for (var x = 0; x < estudiantes; x++) {

                for (var y = 0; y < sct[pos].dedicacion[x].horas.length; y++) {

                    total = total + sct[pos].dedicacion[x].horas[y];

                }

                promedio = total / estudiantes;

                if (x != 0) {
                    translate(0, 31)
                }

                var alerta;

                if (proporcional_fix < promedio) {
                    fill(255, 0, 0);
                } else {
                    fill(125);
                }

                rect(0, 0, promedio * (width / horas), 30);

                textSize(16);

                text(promedio + " hrs. (" + sct[pos].dedicacion[x].nombre + ")", promedio * (width / horas) + 10, 20);

                promedio = 0;

                total = 0;

            }

            createElement('p', 'Este gráfico se construye mediante consulta a un documento JSON que se encuentra publicado en <a href="https://api.myjson.com/bins/170uju">' + url + '</a>').addClass("py-3 small").parent("inside");

        }
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>

</html>